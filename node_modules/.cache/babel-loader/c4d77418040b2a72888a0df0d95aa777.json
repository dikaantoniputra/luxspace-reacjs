{"ast":null,"code":"import _slicedToArray from\"C:/Users/Dika/Documents/luxspace-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"C:/Users/Dika/Documents/luxspace-react/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useCallback,useReducer,useRef}from\"react\";import useSafeDispatch from\"./useSafeDispatch\";var defaultState={data:null,status:\"idle\",error:null};export default function useAsync(initialState){var initialStateRef=useRef(_objectSpread(_objectSpread({},defaultState),initialState));var _useReducer=useReducer(function(state,action){return _objectSpread(_objectSpread({},state),action);},initialStateRef.current),_useReducer2=_slicedToArray(_useReducer,2),_useReducer2$=_useReducer2[0],data=_useReducer2$.data,status=_useReducer2$.status,error=_useReducer2$.error,setState=_useReducer2[1];var safeSetState=useSafeDispatch(setState);var run=useCallback(function(promise){if(!promise||!promise.then)throw new Error(\"The argument passed to useAsync().run must be a promise\");safeSetState({status:\"pending\"});return promise.then(function(data){safeSetState({data:data,status:\"resolved\"});return data;},function(error){safeSetState({status:\"rejected\",error:JSON.parse(error.message)});});},[safeSetState]);var setData=useCallback(function(data){safeSetState({data:data});},[safeSetState]);var setError=useCallback(function(error){safeSetState({error:error});},[safeSetState]);var reset=useCallback(function(){safeSetState(initialStateRef.current);},[safeSetState]);return{data:data,status:status,error:error,run:run,setData:setData,setError:setError,reset:reset,isIdle:status===\"idle\",isLoading:status===\"idle\"||status===\"pending\",isError:status===\"rejected\",isSuccess:status===\"resolved\"};}","map":{"version":3,"names":["useCallback","useReducer","useRef","useSafeDispatch","defaultState","data","status","error","useAsync","initialState","initialStateRef","state","action","current","setState","safeSetState","run","promise","then","Error","JSON","parse","message","setData","setError","reset","isIdle","isLoading","isError","isSuccess"],"sources":["C:/Users/Dika/Documents/luxspace-react/src/helpers/hooks/useAsync.js"],"sourcesContent":["import { useCallback, useReducer, useRef } from \"react\";\r\n\r\nimport useSafeDispatch from \"./useSafeDispatch\";\r\n\r\nconst defaultState = {\r\n  data: null,\r\n  status: \"idle\",\r\n  error: null,\r\n};\r\n\r\nexport default function useAsync(initialState) {\r\n  const initialStateRef = useRef({\r\n    ...defaultState,\r\n    ...initialState,\r\n  });\r\n\r\n  const [{ data, status, error }, setState] = useReducer((state, action) => {\r\n    return { ...state, ...action };\r\n  }, initialStateRef.current);\r\n\r\n  const safeSetState = useSafeDispatch(setState);\r\n\r\n  const run = useCallback(\r\n    (promise) => {\r\n      if (!promise || !promise.then)\r\n        throw new Error(\r\n          `The argument passed to useAsync().run must be a promise`\r\n        );\r\n      safeSetState({ status: \"pending\" });\r\n      return promise.then(\r\n        (data) => {\r\n          safeSetState({ data, status: \"resolved\" });\r\n\r\n          return data;\r\n        },\r\n        (error) => {\r\n          safeSetState({\r\n            status: \"rejected\",\r\n            error: JSON.parse(error.message),\r\n          });\r\n        }\r\n      );\r\n    },\r\n    [safeSetState]\r\n  );\r\n\r\n  const setData = useCallback(\r\n    (data) => {\r\n      safeSetState({ data });\r\n    },\r\n    [safeSetState]\r\n  );\r\n\r\n  const setError = useCallback(\r\n    (error) => {\r\n      safeSetState({ error });\r\n    },\r\n    [safeSetState]\r\n  );\r\n\r\n  const reset = useCallback(() => {\r\n    safeSetState(initialStateRef.current);\r\n  }, [safeSetState]);\r\n\r\n  return {\r\n    data,\r\n    status,\r\n    error,\r\n    run,\r\n    setData,\r\n    setError,\r\n    reset,\r\n    isIdle: status === \"idle\",\r\n    isLoading: status === \"idle\" || status === \"pending\",\r\n    isError: status === \"rejected\",\r\n    isSuccess: status === \"resolved\",\r\n  };\r\n}\r\n"],"mappings":"uPAAA,OAASA,WAAT,CAAsBC,UAAtB,CAAkCC,MAAlC,KAAgD,OAAhD,CAEA,MAAOC,gBAAP,KAA4B,mBAA5B,CAEA,GAAMC,aAAY,CAAG,CACnBC,IAAI,CAAE,IADa,CAEnBC,MAAM,CAAE,MAFW,CAGnBC,KAAK,CAAE,IAHY,CAArB,CAMA,cAAe,SAASC,SAAT,CAAkBC,YAAlB,CAAgC,CAC7C,GAAMC,gBAAe,CAAGR,MAAM,gCACzBE,YADyB,EAEzBK,YAFyB,EAA9B,CAKA,gBAA4CR,UAAU,CAAC,SAACU,KAAD,CAAQC,MAAR,CAAmB,CACxE,sCAAYD,KAAZ,EAAsBC,MAAtB,EACD,CAFqD,CAEnDF,eAAe,CAACG,OAFmC,CAAtD,0EAASR,IAAT,eAASA,IAAT,CAAeC,MAAf,eAAeA,MAAf,CAAuBC,KAAvB,eAAuBA,KAAvB,CAAgCO,QAAhC,iBAIA,GAAMC,aAAY,CAAGZ,eAAe,CAACW,QAAD,CAApC,CAEA,GAAME,IAAG,CAAGhB,WAAW,CACrB,SAACiB,OAAD,CAAa,CACX,GAAI,CAACA,OAAD,EAAY,CAACA,OAAO,CAACC,IAAzB,CACE,KAAM,IAAIC,MAAJ,2DAAN,CAGFJ,YAAY,CAAC,CAAET,MAAM,CAAE,SAAV,CAAD,CAAZ,CACA,MAAOW,QAAO,CAACC,IAAR,CACL,SAACb,IAAD,CAAU,CACRU,YAAY,CAAC,CAAEV,IAAI,CAAJA,IAAF,CAAQC,MAAM,CAAE,UAAhB,CAAD,CAAZ,CAEA,MAAOD,KAAP,CACD,CALI,CAML,SAACE,KAAD,CAAW,CACTQ,YAAY,CAAC,CACXT,MAAM,CAAE,UADG,CAEXC,KAAK,CAAEa,IAAI,CAACC,KAAL,CAAWd,KAAK,CAACe,OAAjB,CAFI,CAAD,CAAZ,CAID,CAXI,CAAP,CAaD,CApBoB,CAqBrB,CAACP,YAAD,CArBqB,CAAvB,CAwBA,GAAMQ,QAAO,CAAGvB,WAAW,CACzB,SAACK,IAAD,CAAU,CACRU,YAAY,CAAC,CAAEV,IAAI,CAAJA,IAAF,CAAD,CAAZ,CACD,CAHwB,CAIzB,CAACU,YAAD,CAJyB,CAA3B,CAOA,GAAMS,SAAQ,CAAGxB,WAAW,CAC1B,SAACO,KAAD,CAAW,CACTQ,YAAY,CAAC,CAAER,KAAK,CAALA,KAAF,CAAD,CAAZ,CACD,CAHyB,CAI1B,CAACQ,YAAD,CAJ0B,CAA5B,CAOA,GAAMU,MAAK,CAAGzB,WAAW,CAAC,UAAM,CAC9Be,YAAY,CAACL,eAAe,CAACG,OAAjB,CAAZ,CACD,CAFwB,CAEtB,CAACE,YAAD,CAFsB,CAAzB,CAIA,MAAO,CACLV,IAAI,CAAJA,IADK,CAELC,MAAM,CAANA,MAFK,CAGLC,KAAK,CAALA,KAHK,CAILS,GAAG,CAAHA,GAJK,CAKLO,OAAO,CAAPA,OALK,CAMLC,QAAQ,CAARA,QANK,CAOLC,KAAK,CAALA,KAPK,CAQLC,MAAM,CAAEpB,MAAM,GAAK,MARd,CASLqB,SAAS,CAAErB,MAAM,GAAK,MAAX,EAAqBA,MAAM,GAAK,SATtC,CAULsB,OAAO,CAAEtB,MAAM,GAAK,UAVf,CAWLuB,SAAS,CAAEvB,MAAM,GAAK,UAXjB,CAAP,CAaD"},"metadata":{},"sourceType":"module"}